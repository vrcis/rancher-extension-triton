{"version":3,"file":"triton-0.2.0.umd.min.machine-config.js","mappings":"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","sources":["webpack://triton-0.2.0/./machine-config/triton.vue","webpack://triton-0.2.0/./machine-config/triton.vue?687a"],"sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { NORMAN, SECRET } from '@shell/config/types';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\n\nexport default {\n   components: {\n      LabeledInput, KeyValue\n   },\n\n   mixins: [CreateEditView],\n\n   props: {\n      credentialId: {\n         type:     String,\n         required: true,\n      },\n      disabled: {\n         type:    Boolean,\n         default: false\n      }\n   },\n\n   async fetch() {\n      this.errors = [];\n\n      if (!this.credentialId) {\n         return;\n      }\n\n      if (this.mode === _EDIT) {\n         this.initForEditMode();\n         return;\n      }\n\n      try {\n         this.credential = await this.$store.dispatch('rancher/find', { type: NORMAN.CLOUD_CREDENTIAL, id: this.credentialId });\n         \n         this.value.url = this.credential.tritoncredentialConfig.url;\n         this.value.tlsInsecure = this.credential.tritoncredentialConfig.tlsInsecure;\n         this.value.account = this.credential.tritoncredentialConfig.account;\n         this.value.keyId = this.credential.tritoncredentialConfig.keyId;\n         this.value.keyMaterial = this.credential.tritoncredentialConfig.keyMaterial;\n      } catch (e) {\n         this.credential = null;\n      }\n\n      this.defaultConfig();\n   },\n\n   data() {\n      // temp objects for data input\n      return {\n         mdataObject: null,\n         tagsObject: null\n      };\n   },\n\n   watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n  },\n\n   methods: {\n      initForEditMode() {\n         this.metadataStringToObject();\n         this.tagsStringToObject();\n      },\n      defaultConfig() {\n         const poolIndex = this.$attrs[\"pool-index\"];\n         const machinePools = this.$attrs[\"machine-pools\"];\n\n         // if this is not the first machine pool and it's the most recent\n         // one created then default some fields from the first machine pool\n         if (machinePools && poolIndex > 0 && poolIndex == (machinePools.length - 1)) {\n            const firstMachinePool = machinePools[0];\n\n            if (!this.value.image)\n               this.value.image = firstMachinePool.config.image;\n\n            if (!this.value.sshUser)\n               this.value.sshUser = firstMachinePool.config.sshUser;\n\n            if (!this.value.actAs)\n               this.value.actAs = firstMachinePool.config.actAs;\n         }\n      },\n      // set metada string from UI object input\n      metadataObjectToString(mdataObject) {\n         const array = [];\n\n         for (const k in mdataObject) {\n            array.push(`${k}=${mdataObject[k]}`);\n         }\n\n         this.$set(this.value, 'mdata', array.join(','));\n      },\n      // populate metadata in UI from existing string value\n      metadataStringToObject() {\n         const entries = (this.value.mdata || '').split(/,/);\n         const out = {};\n\n         // for each entry\n         entries.forEach(function(entry) {\n            const key = entry.substring(0, entry.indexOf(\"=\")).trim();\n            const value = entry.substring(entry.indexOf(\"=\") + 1).trim();\n\n            if (key) {\n               out[key] = value;\n            }\n         });\n\n         this.mdataObject = out;\n      },\n      // set tags string from UI object input\n      tagsObjectToString(tagsObject) {\n         const array = [];\n\n         for (const k in tagsObject) {\n            array.push(`${k}=${tagsObject[k]}`);\n         }\n\n         this.$set(this.value, 'tags', array.join(','));\n      },\n      // populate tags in UI from existing string value\n      tagsStringToObject() {\n         const entries = (this.value.tags || '').split(/,/);\n         const out = {};\n\n         // for each entry\n         entries.forEach(function(entry) {\n            const key = entry.substring(0, entry.indexOf(\"=\")).trim();\n            const value = entry.substring(entry.indexOf(\"=\") + 1).trim();\n\n            if (key) {\n               out[key] = value;\n            }\n         });\n\n         this.tagsObject = out;\n      }\n   }\n}\n</script>\n\n<template>\n   <div>\n      <div class=\"triton-config\">\n         <h3>Triton Configuration</h3>\n      </div>\n      <div class=\"row mt-10\">\n         <div class=\"col span-6\">\n            <LabeledInput\n               v-model:value=\"value.image\"\n               type=\"text\"\n               :mode=\"mode\"\n               :required=\"true\"\n               :disabled=\"disabled\"\n               label-key=\"driver.triton.machine.fields.image.label\"\n               v-tooltip=\"t('driver.triton.machine.fields.image.tooltip')\"\n               data-testid=\"triton-machine-config-image\"\n            />\n         </div>\n         <div class=\"col span-6\">\n            <LabeledInput\n               v-model:value=\"value.package\"\n               type=\"text\"\n               :mode=\"mode\"\n               :required=\"true\"\n               :disabled=\"disabled\"\n               label-key=\"driver.triton.machine.fields.package.label\"\n               v-tooltip=\"t('driver.triton.machine.fields.package.tooltip')\"\n               data-testid=\"triton-machine-config-package\"\n            />\n         </div>\n      </div>\n      <div class=\"row mt-10\">\n         <div class=\"col span-6\">\n            <LabeledInput\n               v-model:value=\"value.sshUser\"\n               type=\"text\"\n               :mode=\"mode\"\n               :required=\"true\"\n               :disabled=\"disabled\"\n               label-key=\"driver.triton.machine.fields.sshUser.label\"\n               v-tooltip=\"t('driver.triton.machine.fields.sshUser.tooltip')\"\n               data-testid=\"triton-machine-config-ssh-user\"\n            />\n         </div>\n         <div class=\"col span-6\">\n            <LabeledInput\n               v-model:value=\"value.actAs\"\n               type=\"text\"\n               :mode=\"mode\"\n               :required=\"false\"\n               :disabled=\"disabled\"\n               label-key=\"driver.triton.machine.fields.actAs.label\"\n               v-tooltip=\"t('driver.triton.machine.fields.actAs.tooltip')\"\n               data-testid=\"triton-machine-config-act-as\"\n            />\n         </div>\n      </div>\n      <div class=\"row mt-10\">\n         <div class=\"col span-12\">\n            <h4>\n               <t k=\"driver.triton.machine.fields.tags.label\" v-tooltip=\"t('driver.triton.machine.fields.tags.tooltip')\"/>\n            </h4>\n            <KeyValue\n               v-model:value=\"tagsObject\"\n               :mode=\"mode\"\n               :disabled=\"disabled\"\n               add-label=\"Add Tag\"\n               :initial-empty-row=\"true\"\n               @input=\"tagsObjectToString\"\n               :parserSeparators=\"['=']\"\n               protip=\"Paste lines of <em>key=value</em> into any key field for easy bulk entry\"\n            />\n         </div>\n      </div>\n      <div class=\"row mt-10\">\n         <div class=\"col span-12\">\n            <h4>\n               <t k=\"driver.triton.machine.fields.mdata.label\" v-tooltip=\"t('driver.triton.machine.fields.mdata.tooltip')\"/>\n            </h4>\n            <KeyValue\n               v-model:value=\"mdataObject\"\n               :mode=\"mode\"\n               :disabled=\"disabled\"\n               add-label=\"Add Metadata\"\n               :initial-empty-row=\"true\"\n               @input=\"metadataObjectToString\"\n               :parserSeparators=\"['=']\"\n               protip=\"Paste lines of <em>key=value</em> into any key field for easy bulk entry\"\n            />\n         </div>\n      </div>\n   </div>\n</template>","import { render } from \"./triton.vue?vue&type=template&id=0b99bd0c\"\nimport script from \"./triton.vue?vue&type=script&lang=js\"\nexport * from \"./triton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","value","_ctx","image","$event","type","mode","required","disabled","$props","t","_hoisted_3","package","_hoisted_4","_hoisted_5","sshUser","_hoisted_6","actAs","_hoisted_7","_hoisted_8","_component_t","k","_component_KeyValue","$data","tagsObject","onInput","$options","tagsObjectToString","parserSeparators","protip","_hoisted_9","_hoisted_10","mdataObject","metadataObjectToString","components","LabeledInput","KeyValue","mixins","CreateEditView","props","credentialId","String","Boolean","default","fetch","this","errors","_EDIT","credential","$store","dispatch","NORMAN","CLOUD_CREDENTIAL","id","url","tritoncredentialConfig","tlsInsecure","account","keyId","keyMaterial","e","defaultConfig","initForEditMode","data","watch","$fetch","methods","metadataStringToObject","tagsStringToObject","poolIndex","$attrs","machinePools","length","firstMachinePool","config","array","push","$set","join","entries","mdata","split","out","forEach","entry","key","substring","indexOf","trim","tags","__exports__","render"],"sourceRoot":""}