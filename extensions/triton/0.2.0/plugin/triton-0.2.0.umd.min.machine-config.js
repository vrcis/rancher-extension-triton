"use strict";(("undefined"!==typeof self?self:this)["webpackChunktriton_0_2_0"]=("undefined"!==typeof self?self:this)["webpackChunktriton_0_2_0"]||[]).push([[921],{2815:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(9274);const l={class:"row mt-10"},s={class:"col span-6"},n={class:"col span-6"},d={class:"row mt-10"},o={class:"col span-6"},r={class:"col span-6"},c={class:"row mt-10"},u={class:"col span-12"},m={class:"row mt-10"},h={class:"col span-12"};function v(e,t,a,v,p,f){const b=(0,i.resolveComponent)("LabeledInput"),g=(0,i.resolveComponent)("t"),y=(0,i.resolveComponent)("KeyValue"),k=(0,i.resolveDirective)("tooltip");return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[t[6]||(t[6]=(0,i.createElementVNode)("div",{class:"triton-config"},[(0,i.createElementVNode)("h3",null,"Triton Configuration")],-1)),(0,i.createElementVNode)("div",l,[(0,i.createElementVNode)("div",s,[(0,i.withDirectives)((0,i.createVNode)(b,{value:e.value.image,"onUpdate:value":t[0]||(t[0]=t=>e.value.image=t),type:"text",mode:e.mode,required:!0,disabled:a.disabled,"label-key":"driver.triton.machine.fields.image.label","data-testid":"triton-machine-config-image"},null,8,["value","mode","disabled"]),[[k,e.t("driver.triton.machine.fields.image.tooltip")]])]),(0,i.createElementVNode)("div",n,[(0,i.withDirectives)((0,i.createVNode)(b,{value:e.value.package,"onUpdate:value":t[1]||(t[1]=t=>e.value.package=t),type:"text",mode:e.mode,required:!0,disabled:a.disabled,"label-key":"driver.triton.machine.fields.package.label","data-testid":"triton-machine-config-package"},null,8,["value","mode","disabled"]),[[k,e.t("driver.triton.machine.fields.package.tooltip")]])])]),(0,i.createElementVNode)("div",d,[(0,i.createElementVNode)("div",o,[(0,i.withDirectives)((0,i.createVNode)(b,{value:e.value.sshUser,"onUpdate:value":t[2]||(t[2]=t=>e.value.sshUser=t),type:"text",mode:e.mode,required:!0,disabled:a.disabled,"label-key":"driver.triton.machine.fields.sshUser.label","data-testid":"triton-machine-config-ssh-user"},null,8,["value","mode","disabled"]),[[k,e.t("driver.triton.machine.fields.sshUser.tooltip")]])]),(0,i.createElementVNode)("div",r,[(0,i.withDirectives)((0,i.createVNode)(b,{value:e.value.actAs,"onUpdate:value":t[3]||(t[3]=t=>e.value.actAs=t),type:"text",mode:e.mode,required:!1,disabled:a.disabled,"label-key":"driver.triton.machine.fields.actAs.label","data-testid":"triton-machine-config-act-as"},null,8,["value","mode","disabled"]),[[k,e.t("driver.triton.machine.fields.actAs.tooltip")]])])]),(0,i.createElementVNode)("div",c,[(0,i.createElementVNode)("div",u,[(0,i.createElementVNode)("h4",null,[(0,i.withDirectives)((0,i.createVNode)(g,{k:"driver.triton.machine.fields.tags.label"},null,512),[[k,e.t("driver.triton.machine.fields.tags.tooltip")]])]),(0,i.createVNode)(y,{value:p.tagsObject,"onUpdate:value":t[4]||(t[4]=e=>p.tagsObject=e),mode:e.mode,disabled:a.disabled,"add-label":"Add Tag","initial-empty-row":!0,onInput:f.tagsObjectToString,parserSeparators:["="],protip:"Paste lines of <em>key=value</em> into any key field for easy bulk entry"},null,8,["value","mode","disabled","onInput"])])]),(0,i.createElementVNode)("div",m,[(0,i.createElementVNode)("div",h,[(0,i.createElementVNode)("h4",null,[(0,i.withDirectives)((0,i.createVNode)(g,{k:"driver.triton.machine.fields.mdata.label"},null,512),[[k,e.t("driver.triton.machine.fields.mdata.tooltip")]])]),(0,i.createVNode)(y,{value:p.mdataObject,"onUpdate:value":t[5]||(t[5]=e=>p.mdataObject=e),mode:e.mode,disabled:a.disabled,"add-label":"Add Metadata","initial-empty-row":!0,onInput:f.metadataObjectToString,parserSeparators:["="],protip:"Paste lines of <em>key=value</em> into any key field for easy bulk entry"},null,8,["value","mode","disabled","onInput"])])])])}var p=a(3927),f=a(9400),b=a(4160),g=a(5664),y=a(4220),k={components:{LabeledInput:b.o,KeyValue:f.A},mixins:[p.A],props:{credentialId:{type:String,required:!0},disabled:{type:Boolean,default:!1}},async fetch(){if(this.errors=[],this.credentialId)if(this.mode!==y.G5){try{this.credential=await this.$store.dispatch("rancher/find",{type:g.k$.CLOUD_CREDENTIAL,id:this.credentialId}),this.value.url=this.credential.tritoncredentialConfig.url,this.value.tlsInsecure=this.credential.tritoncredentialConfig.tlsInsecure,this.value.account=this.credential.tritoncredentialConfig.account,this.value.keyId=this.credential.tritoncredentialConfig.keyId,this.value.keyMaterial=this.credential.tritoncredentialConfig.keyMaterial}catch(e){this.credential=null}this.defaultConfig()}else this.initForEditMode()},data(){return{mdataObject:null,tagsObject:null}},watch:{credentialId(){this.$fetch()}},methods:{initForEditMode(){this.metadataStringToObject(),this.tagsStringToObject()},defaultConfig(){const e=this.$attrs["pool-index"],t=this.$attrs["machine-pools"];if(t&&e>0&&e==t.length-1){const e=t[0];this.value.image||(this.value.image=e.config.image),this.value.sshUser||(this.value.sshUser=e.config.sshUser),this.value.actAs||(this.value.actAs=e.config.actAs)}},metadataObjectToString(e){const t=[];for(const a in e)t.push(`${a}=${e[a]}`);this.$set(this.value,"mdata",t.join(","))},metadataStringToObject(){const e=(this.value.mdata||"").split(/,/),t={};e.forEach((function(e){const a=e.substring(0,e.indexOf("=")).trim(),i=e.substring(e.indexOf("=")+1).trim();a&&(t[a]=i)})),this.mdataObject=t},tagsObjectToString(e){const t=[];for(const a in e)t.push(`${a}=${e[a]}`);this.$set(this.value,"tags",t.join(","))},tagsStringToObject(){const e=(this.value.tags||"").split(/,/),t={};e.forEach((function(e){const a=e.substring(0,e.indexOf("=")).trim(),i=e.substring(e.indexOf("=")+1).trim();a&&(t[a]=i)})),this.tagsObject=t}}},V=a(7433);const N=(0,V.A)(k,[["render",v]]);var E=N}}]);
//# sourceMappingURL=triton-0.2.0.umd.min.machine-config.js.map